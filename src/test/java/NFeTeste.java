public class NFeTeste {


    public static void main(String[] args) {

        NfeApi api = new NfeApi();
        api.NfeConfigurar("mar08650",
                "changeit",
                "D:\\Certificado\\clientes\\dellabruna.pfx",
                "D:\\Certificado\\clientes\\producao.cacerts",
                "SP",
                "1",
                "",
                "",
                "4.00"
        );

        String response;

        try {
            //String retorno = api.NfeWebServiceStatus("PR", "55", "1");
            //String teste = "13ªºooooooo";

            response = api.NFeEmitirLote("<enviNFe xmlns=\"http://www.portalfiscal.inf.br/nfe\" versao=\"4.00\"><idLote>35065</idLote><indSinc>1</indSinc><NFe xmlns=\"http://www.portalfiscal.inf.br/nfe\"><infNFe Id=\"NFe41231107476927000141550010000407131110407130\" versao=\"4.00\"><ide><cUF>41</cUF><cNF>11040713</cNF><natOp>VENDA DE PRODUCAO SUJEITO AO REGIME S.T.</natOp><mod>55</mod><serie>1</serie><nNF>40713</nNF><dhEmi>2023-11-30T15:12:48-03:00</dhEmi><dhSaiEnt>2023-11-30T15:12:48-03:00</dhSaiEnt><tpNF>1</tpNF><idDest>1</idDest><cMunFG>4113700</cMunFG><tpImp>1</tpImp><tpEmis>1</tpEmis><cDV>0</cDV><tpAmb>1</tpAmb><finNFe>1</finNFe><indFinal>0</indFinal><indPres>0</indPres><procEmi>0</procEmi><verProc>4.01</verProc></ide><emit><CNPJ>07476927000141</CNPJ><xNome>DUARTE VIDROS LTDA</xNome><xFant>V1 VIDROS</xFant><enderEmit><xLgr>ANGELINA RICCI VEZOZZO</xLgr><nro>640</nro><xBairro>INDUSTRIA LEVES</xBairro><cMun>4113700</cMun><xMun>LONDRINA</xMun><UF>PR</UF><CEP>86030340</CEP><cPais>1058</cPais><xPais>BRASIL</xPais><fone>4333564141</fone></enderEmit><IE>9034639296</IE><IEST>9059175286</IEST><CRT>1</CRT></emit><dest><CNPJ>09157726000107</CNPJ><xNome>O R DOS SANTOS SERRALHERIA</xNome><enderDest><xLgr>RUA SUDAO</xLgr><nro>265</nro><xBairro>OURO VERDE</xBairro><cMun>4113700</cMun><xMun>LONDRINA</xMun><UF>PR</UF><CEP>86030030</CEP><cPais>1058</cPais><xPais>BRASIL</xPais><fone>43984611660</fone></enderDest><indIEDest>1</indIEDest><IE>9042078708</IE><email>kajserviÃ§os@hotmail.com</email></dest><det nItem=\"1\"><prod><cProd>1501.0006|3</cProd><cEAN>SEM GTIN</cEAN><xProd>VIDRO TEMP. 08MM INC 740 X 2145</xProd><NCM>70071900</NCM><CFOP>5401</CFOP><uCom>M2</uCom><qCom>1.0000</qCom><vUnCom>197.8710700000</vUnCom><vProd>197.87</vProd><cEANTrib>SEM GTIN</cEANTrib><uTrib>M2</uTrib><qTrib>1.0000</qTrib><vUnTrib>197.8710700000</vUnTrib><indTot>1</indTot><xPed>INC 08</xPed><nItemPed>1</nItemPed></prod><imposto><ICMS><ICMSSN900><orig>0</orig><CSOSN>900</CSOSN><modBC>3</modBC><vBC>0.00</vBC><pRedBC>0.00</pRedBC><pICMS>12.00</pICMS><vICMS>0.00</vICMS><modBCST>4</modBCST><pMVAST>45.00</pMVAST><pRedBCST>0.00</pRedBCST><vBCST>286.91</vBCST><pICMSST>19.00</pICMSST><vICMSST>30.77</vICMSST><pCredSN>3.00</pCredSN><vCredICMSSN>5.94</vCredICMSSN></ICMSSN900></ICMS><IPI><CNPJProd>00000000000000</CNPJProd><cSelo>N</cSelo><qSelo>0</qSelo><cEnq>999</cEnq><IPINT><CST>53</CST></IPINT></IPI><II><vBC>0.00</vBC><vDespAdu>0.00</vDespAdu><vII>0.00</vII><vIOF>0.00</vIOF></II><PIS><PISOutr><CST>99</CST><vBC>0.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>99</CST><vBC>0.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"2\"><prod><cProd>1501.0018|3</cProd><cEAN>SEM GTIN</cEAN><xProd>VIDRO TEMP. BOX 08MM INC 670 X 1880</xProd><NCM>70071900</NCM><CFOP>5401</CFOP><uCom>PC</uCom><qCom>1.0000</qCom><vUnCom>151.9366500000</vUnCom><vProd>151.94</vProd><cEANTrib>SEM GTIN</cEANTrib><uTrib>PC</uTrib><qTrib>1.0000</qTrib><vUnTrib>151.9366500000</vUnTrib><indTot>1</indTot><xPed>INC 08</xPed><nItemPed>2</nItemPed></prod><imposto><ICMS><ICMSSN900><orig>0</orig><CSOSN>900</CSOSN><modBC>3</modBC><vBC>0.00</vBC><pRedBC>0.00</pRedBC><pICMS>12.00</pICMS><vICMS>0.00</vICMS><modBCST>4</modBCST><pMVAST>45.00</pMVAST><pRedBCST>0.00</pRedBCST><vBCST>220.31</vBCST><pICMSST>19.00</pICMSST><vICMSST>23.63</vICMSST><pCredSN>3.00</pCredSN><vCredICMSSN>4.56</vCredICMSSN></ICMSSN900></ICMS><IPI><CNPJProd>00000000000000</CNPJProd><cSelo>N</cSelo><qSelo>0</qSelo><cEnq>999</cEnq><IPINT><CST>53</CST></IPINT></IPI><II><vBC>0.00</vBC><vDespAdu>0.00</vDespAdu><vII>0.00</vII><vIOF>0.00</vIOF></II><PIS><PISOutr><CST>99</CST><vBC>0.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>99</CST><vBC>0.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"3\"><prod><cProd>1501.0018|3</cProd><cEAN>SEM GTIN</cEAN><xProd>VIDRO TEMP. BOX 08MM INC 620 X 1845</xProd><NCM>70071900</NCM><CFOP>5401</CFOP><uCom>PC</uCom><qCom>1.0000</qCom><vUnCom>137.3712900000</vUnCom><vProd>137.37</vProd><cEANTrib>SEM GTIN</cEANTrib><uTrib>PC</uTrib><qTrib>1.0000</qTrib><vUnTrib>137.3712900000</vUnTrib><indTot>1</indTot><xPed>INC 08</xPed><nItemPed>2</nItemPed></prod><imposto><ICMS><ICMSSN900><orig>0</orig><CSOSN>900</CSOSN><modBC>3</modBC><vBC>0.00</vBC><pRedBC>0.00</pRedBC><pICMS>12.00</pICMS><vICMS>0.00</vICMS><modBCST>4</modBCST><pMVAST>45.00</pMVAST><pRedBCST>0.00</pRedBCST><vBCST>199.19</vBCST><pICMSST>19.00</pICMSST><vICMSST>21.37</vICMSST><pCredSN>3.00</pCredSN><vCredICMSSN>4.12</vCredICMSSN></ICMSSN900></ICMS><IPI><CNPJProd>00000000000000</CNPJProd><cSelo>N</cSelo><qSelo>0</qSelo><cEnq>999</cEnq><IPINT><CST>53</CST></IPINT></IPI><II><vBC>0.00</vBC><vDespAdu>0.00</vDespAdu><vII>0.00</vII><vIOF>0.00</vIOF></II><PIS><PISOutr><CST>99</CST><vBC>0.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>99</CST><vBC>0.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><total><ICMSTot><vBC>0.00</vBC><vICMS>0.00</vICMS><vICMSDeson>0.00</vICMSDeson><vFCPUFDest>0</vFCPUFDest><vICMSUFDest>0</vICMSUFDest><vICMSUFRemet>0</vICMSUFRemet><vFCP>0</vFCP><vBCST>706.41</vBCST><vST>75.77</vST><vFCPST>0.00</vFCPST><vFCPSTRet>0</vFCPSTRet><vProd>487.18</vProd><vFrete>0.00</vFrete><vSeg>0.00</vSeg><vDesc>0.00</vDesc><vII>0.00</vII><vIPI>0.00</vIPI><vIPIDevol>0</vIPIDevol><vPIS>0.00</vPIS><vCOFINS>0.00</vCOFINS><vOutro>0.00</vOutro><vNF>562.95</vNF></ICMSTot></total><transp><modFrete>0</modFrete><transporta><CNPJ>07476927000141</CNPJ><xNome>DUARTE VIDROS LTDA</xNome><IE>9034639296</IE><xEnder>ANGELINA RICCI VEZOZZO,640</xEnder><xMun>LONDRINA</xMun><UF>PR</UF></transporta><veicTransp><placa>AWL6194</placa><UF>PR</UF></veicTransp><vol><qVol>3</qVol><esp>VOLUME</esp><marca>V1 VIDROS</marca><pesoL>79.816</pesoL><pesoB>79.816</pesoB></vol></transp><cobr><fat><nFat>40713</nFat><vOrig>562.95</vOrig><vLiq>562.95</vLiq></fat><dup><nDup>001</nDup><dVenc>2023-11-30</dVenc><vDup>562.95</vDup></dup></cobr><pag><detPag><tPag>15</tPag><vPag>562.95</vPag></detPag></pag><infAdic><infCpl>SUBSTITUICAO TRIBUTARIA CFE ANEXO X SECAO IV DO RICMS PR DIFERIMENTO PARCIAL DE 36,84 VALOR DO ICMS 00.00 CFE ART. 10 I DO RICMS PR MOTORISTA: NILSON RIBEIRO CPF:76361829987</infCpl></infAdic><infRespTec><CNPJ>04329365000115</CNPJ><xContato>Leandro Penha</xContato><email>leandropenha@wvetro.com.br</email><fone>4331724200</fone><idCSRT>99</idCSRT><hashCSRT>YWFhYWFhYWFhYWFhYWFhYWFhYWE=</hashCSRT></infRespTec></infNFe></NFe></enviNFe>",
                    "35065",
                    "1");


            //response = api.NfCancelar("41240231067991000315550010000023951001423951", "141240045330455", "CLIENTE SOLICITOU CANCELAMENTO");

            //response = api.NfCorrigirNota("35240255817142000138550010000198821020198823", "DATVENC [28/03/24]", 1);

            System.out.println(response);

//         String xml = "<enviNFe versao=\"4.00\" xmlns=\"http://www.portalfiscal.inf.br/nfe\"><idLote>24764</idLote><indSinc>1</indSinc><NFe xmlns=\"http://www.portalfiscal.inf.br/nfe\"><infNFe versao=\"4.00\" Id=\"NFe41230580843550000101550010001642691051642696\"><ide><cUF>41</cUF><cNF>05164269</cNF><natOp>VENDA PROD. DO ESTAB.</natOp><mod>55</mod><serie>1</serie><nNF>164269</nNF><dhEmi>2023-05-23T13:32:55-03:00</dhEmi><dhSaiEnt>2023-05-23T13:32:55-03:00</dhSaiEnt><tpNF>1</tpNF><idDest>1</idDest><cMunFG>4101507</cMunFG><tpImp>1</tpImp><tpEmis>1</tpEmis><cDV>6</cDV><tpAmb>1</tpAmb><finNFe>1</finNFe><indFinal>0</indFinal><indPres>0</indPres><procEmi>0</procEmi><verProc>4.01</verProc></ide><emit><CNPJ>80843550000101</CNPJ><xNome>V L MUNHOZ CIA LTDA</xNome><xFant>MOVEIS VILA RICA</xFant><enderEmit><xLgr>GUARATINGA</xLgr><nro>1835</nro><xBairro>PQ INDUSTRIAL II</xBairro><cMun>4101507</cMun><xMun>ARAPONGAS</xMun><UF>PR</UF><CEP>86703010</CEP><cPais>1058</cPais><xPais>BRASIL</xPais><fone>4331721000</fone></enderEmit><IE>6280111927</IE><CRT>3</CRT></emit><dest><CNPJ>41981760000104</CNPJ><xNome>VLC DECOR PLANEJADOS LTDA (57592)</xNome><enderDest><xLgr>R PERIQUITO DAS ILHAS</xLgr><nro>70</nro><xBairro>PARQUE INDUSTRIAL I</xBairro><cMun>4101507</cMun><xMun>ARAPONGAS</xMun><UF>PR</UF><CEP>86703001</CEP><cPais>1058</cPais><xPais>BRASIL</xPais><fone>043999688040</fone></enderDest><indIEDest>1</indIEDest><IE>9089276133</IE><email>vlcplanejados_2311@hotmail.com</email></dest><det nItem=\"1\"><prod><cProd>20029</cProd><cEAN>7898693653404</cEAN><xProd>COMODA BALI 2PT/4GV 2023 IMBUIA RUSTICO</xProd><NCM>94035000</NCM><cBenef>PR830001</cBenef><CFOP>5101</CFOP><uCom>UN</uCom><qCom>1.0000</qCom><vUnCom>280.0000000000</vUnCom><vProd>280.00</vProd><cEANTrib>7898693653404</cEANTrib><uTrib>UN</uTrib><qTrib>1.0000</qTrib><vUnTrib>280.0000000000</vUnTrib><indTot>1</indTot><nItemPed>1</nItemPed></prod><imposto><ICMS><ICMS51><orig>0</orig><CST>51</CST><modBC>3</modBC><pRedBC>0.00</pRedBC><vBC>280.00</vBC><pICMS>19.00</pICMS><vICMSOp>53.20</vICMSOp><pDif>36.84</pDif><vICMSDif>19.60</vICMSDif><vICMS>33.60</vICMS></ICMS51></ICMS><IPI><CNPJProd>00000000000000</CNPJProd><cSelo>N</cSelo><qSelo>0</qSelo><cEnq>999</cEnq><IPITrib><CST>50</CST><vBC>280.00</vBC><pIPI>3.25</pIPI><vIPI>9.10</vIPI></IPITrib></IPI><II><vBC>0.00</vBC><vDespAdu>0.00</vDespAdu><vII>0.00</vII><vIOF>0.00</vIOF></II><PIS><PISAliq><CST>01</CST><vBC>246.40</vBC><pPIS>1.65</pPIS><vPIS>4.07</vPIS></PISAliq></PIS><COFINS><COFINSAliq><CST>01</CST><vBC>246.40</vBC><pCOFINS>7.60</pCOFINS><vCOFINS>18.73</vCOFINS></COFINSAliq></COFINS></imposto></det><total><ICMSTot><vBC>280.00</vBC><vICMS>33.60</vICMS><vICMSDeson>0.00</vICMSDeson><vFCPUFDest>0</vFCPUFDest><vICMSUFDest>0</vICMSUFDest><vICMSUFRemet>0</vICMSUFRemet><vFCP>0</vFCP><vBCST>0.00</vBCST><vST>0.00</vST><vFCPST>0.00</vFCPST><vFCPSTRet>0</vFCPSTRet><vProd>280.00</vProd><vFrete>0.00</vFrete><vSeg>0.00</vSeg><vDesc>0.00</vDesc><vII>0.00</vII><vIPI>9.10</vIPI><vIPIDevol>0</vIPIDevol><vPIS>4.07</vPIS><vCOFINS>18.73</vCOFINS><vOutro>0.00</vOutro><vNF>289.10</vNF></ICMSTot></total><transp><modFrete>1</modFrete><transporta><CNPJ>41981760000104</CNPJ><xNome>VLC DECOR PLANEJADOS LTDA</xNome><IE>9089276133</IE><xEnder>R PERIQUITO DAS ILHAS,70</xEnder><xMun>ARAPONGAS</xMun><UF>PR</UF></transporta><vol><qVol>2</qVol><esp>VOLUME</esp><marca>VL RICA</marca><pesoL>48.000</pesoL><pesoB>50.000</pesoB></vol></transp><cobr><fat><nFat>164269</nFat><vOrig>289.10</vOrig><vLiq>289.10</vLiq></fat><dup><nDup>001</nDup><dVenc>2023-05-24</dVenc><vDup>289.10</vDup></dup></cobr><pag><detPag><tPag>15</tPag><vPag>289.10</vPag></detPag></pag><infAdic><infCpl>. ICMS DIFERIDO EM 36.84 CONFORME ART 28 DO ANEXO VIII, ITEM I DO RICM ICMS DIFERIDO EM 36.84 CONFORME ART 28 DO ANEXO VIII, ITEM REPRES. 1614TELEVENDAS VILA RICA - ERICA CARGA 3620 ENTREGA 1A PEDIDO 15966 Valores Tributos: Vlr.ICMS R$33.60 Vlr.IPI R$9.10 Vlr.PIS R$4.07 Vlr.COFINS R$18.73 M3: 0.11203</infCpl></infAdic><infRespTec><CNPJ>04329365000115</CNPJ><xContato>Leandro Penha</xContato><email>leandropenha@wvetro.com.br</email><fone>4331724200</fone><idCSRT>99</idCSRT><hashCSRT>YWFhYWFhYWFhYWFhYWFhYWFhYWE=</hashCSRT></infRespTec></infNFe></NFe></enviNFe>";
//
//            response = api.NFeEmitirLote(xml, "55","1");
            //response = api.NfCorrigirNota("41230931067991000404550010000022041002122042", "REFERENTE AO CEP DA NFE 2204, O CORRETO E 85802-180", 4);
            //System.out.println(response);
        } catch (Exception e) {
            response = "Error: " + e.getMessage();
        }
    }
}

